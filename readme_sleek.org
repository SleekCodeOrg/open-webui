#+title: Readme_sleek

* Running the docker container 
Command to make docker run 
First: 

#+begin_src sh
docker run --rm \
            --name open-webui-dev \
            --network=host \
            \
            --privileged \
            -v /home/jjs/proj/work/gartner/open-webui/data/:/app/backend/data \
            -e WEBUI_SECRET_KEY=ZnHYlldge6/o9V3mm/zkQKB1Ezvp/hdTdCHtMIoj/n/45No \
            open-webui-local
#+end_src

Then: 
#+begin_src sh
docker run --rm \
  --name test-cgroup-fix \
  --runtime=runc \
  -p 8080:8080 \
  --security-opt seccomp=unconfined \
  --security-opt apparmor=unconfined \
  --cap-add=SYS_ADMIN --cap-add=SYS_RESOURCE --cap-add=SYS_PTRACE --cap-add=IPC_LOCK --cap-add=MKNOD \
  --ulimit nofile=65536:65536 \
  --mount type=bind,source=/proc,target=/proc2,readonly=false,bind-recursive=disabled \
  -v /home/jjs/proj/work/gartner/open-webui/data/:/app/backend/data \
  -e WEBUI_SECRET_KEY=ZnHYlldge6/o9V3mm/zkQKB1Ezvp/hdTdCHtMIoj/n/45No \
  --entrypoint sh \
  open-webui-local -c "mount -o remount,rw /sys/fs/cgroup && /app/backend/start.sh"
#+end_src

#+begin_src 
docker run --rm \
  --name test-safe-sandbox \
  -p 8080:8080 \
  --cap-add=SYS_ADMIN --cap-add=SYS_RESOURCE --cap-add=SYS_PTRACE \
  --ulimit nofile=65536:65536 \
  --mount type=bind,source=/proc,target=/proc2,readonly=false,bind-recursive=disabled \
  -v /home/jjs/proj/work/gartner/open-webui/data/:/app/backend/data \
  -e WEBUI_SECRET_KEY=ZnHYlldge6/o9V3mm/zkQKB1Ezvp/hdTdCHtMIoj/n/45No \
  --security-opt seccomp=unconfined \
  --entrypoint sh \
  open-webui-local -c "mount -o remount,rw /sys/fs/cgroup && /app/backend/start.sh"
#+end_src

* Developing the tool 
To develop the tool we need to run the container.
This is currently done automatically by the nixOS system I set up, but you can also run the docker container like described above.

Then you can connect to the docker container like this: 

#+begin_src sh
docker exec -it open-webui-dev /bin/bash
#+end_src

Then, inside the docker container, you can use the =test_workspace.py=  and =run_code_tool.py= files to do development.
The =test_workspace.py= does some basic emulation of what a LLM call looks like. You get back the result etc.
